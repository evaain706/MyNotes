

#### 프로젝트에서 사용될 토스트 컴포넌트를 직접 구현해보기


---

# 구조

#### 토스트 컴포넌트

```jsx
import { createPortal } from 'react-dom';
import { motion } from 'motion/react';
import { cn } from '../../../utils/cn';

interface ToastProps {
  mode: 'default' | 'success' | 'error' | 'warn';
  message: string;
}

const Toast = ({ mode, message }: ToastProps) => {
  const root = document.getElementById('modal-root');

  if (!root) {
    return null;
  }

  let className = '';

  if (mode === 'default') {
    className += 'bg-white text-gray-800';
  } else if (mode === 'success') {
    className += 'bg-green-200 text-green-800';
  } else if (mode === 'error') {
    className += 'bg-red-200 text-red-800';
  } else if (mode === 'warn') {
    className += 'bg-yellow-200 text-yellow-800';
  }

  return createPortal(
    <motion.div
      className={cn(
        'fixed top-10 left-1/2 z-[999] w-[20rem] -translate-x-1/2 rounded-lg py-3 text-center shadow-lg',
        className,
      )}
      initial={{ y: -50, opacity: 0 }}
      animate={{ y: 0, opacity: 1 }}
      exit={{ y: -50, opacity: 0 }}
      transition={{ duration: 0.4, ease: 'easeOut' }}
    >
      <p className='text-[1.4rem] font-bold text-black'>{message}</p>
    </motion.div>,
    root,
  );
};

export default Toast;

```

토스트의 UI를 정의하는 역할을 하는 컴포넌트
props로 받은 모드에따른 스타일과 메세지에 맞는 토스트를 생성하는 역할


## useToastStore

``` js
import { create } from 'zustand';

type ToastMode = 'default' | 'success' | 'error' | 'warn';

interface ToastItem {
  id: number;
  mode: ToastMode;
  message: string;
}

interface ToastStore {
  toasts: ToastItem[];
  addToast: (mode: ToastMode, message: string) => void;
  removeToast: (id: number) => void;
}

export const useToastStore = create<ToastStore>((set) => ({
  toasts: [],
  addToast: (mode, message) => {
    const id = Date.now();
    set((state) => ({ toasts: [...state.toasts, { id, mode, message }] }));

    setTimeout(() => { // 3초뒤에 삭제되게끔
      set((state) => ({
        toasts: state.toasts.filter((toast) => toast.id !== id),
      }));
    }, 3000);
  },
  removeToast: (id) =>
    set((state) => ({
      toasts: state.toasts.filter((toast) => toast.id !== id),
    })),
}));

```

 토스트가 나타나고 사라지는 로직을 관리하는 zustand Store


## ToastContainer

```jsx
import { AnimatePresence } from 'motion/react';
import Toast from './Toast';
import { useToastStore } from '../../../store/useToastStore';

const ToastContainer = () => {
  const toasts = useToastStore((state) => state.toasts);

  return (
    <AnimatePresence>
      {toasts.map((toast) => (
        <Toast key={toast.id} mode={toast.mode} message={toast.message} />
      ))}
    </AnimatePresence>
  );
};

export default ToastContainer;

```

zustand useToastStore의 `toast`상태를 구독한뒤 map메소드를 통해
toast들을 화면에 렌더링하는역할


---

## 사용예시

```jsx
import Button from '../components/Button';
import { useToastStore } from '../store/useToastStore';

const LandingPage = () => {
  

  const addToast = useToastStore((state) => state.addToast);

  return (
    <div className='h-screen snap-y snap-mandatory overflow-y-scroll '>

      <div className='sticky bottom-10 flex justify-center pb-6'>
        <Button
          size='md'
          variant='primary'
          onClick={() => addToast('success', '테스트입니다')}
        >
          토스트 테스트
        </Button>
      </div>
    </div>
  );
};

export default LandingPage;

```