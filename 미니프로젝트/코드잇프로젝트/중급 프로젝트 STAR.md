## 프로젝트 개요

**와인 정보를 한눈에 확인하고 검색 및 필터링할 수 있는 커미션 플랫폼**

---

## 1. 인증·토큰 관리 및 API 요청 구조 개선

### S (Situation)

프로젝트 초기에는 Next.js 환경임에도 불구하고 인증 흐름이  
`클라이언트 → 외부 API 서버` 구조로만 구성되어 있었고,  
토큰 관리 및 인증 책임이 클라이언트에 과도하게 집중되어 보안성과 구조적 확장성에 한계가 있었다.

### T (Task)

- 로그인 / 회원가입 인증 흐름 개선
    
- 토큰 관리 책임을 서버로 분리
    
- 클라이언트·서버 환경별 API 요청 구조 정리
    
- 보안성을 고려한 인증 아키텍처 설계
    

### A (Action)

- 로그인 / 회원가입 로직을 **Next.js Server Action**으로 이전하여  
    인증 요청이 서버에서 직접 처리되도록 개선
    
- 액세스 토큰 및 리프레시 토큰을 **httpOnly + secure 쿠키**로 관리하여  
    클라이언트 JS에서 직접 접근 불가능하도록 설정
    
- API 요청 인스턴스를
    
    - **Client Component용**
        
    - **Server Component용**  
        으로 분리하여 환경별 쿠키 처리 방식 차이를 명확히 구분
        
- 리프레시 토큰 재발급 로직을 **Next API Route**로 분리
    
- Axios 인터셉터를 활용하여
    
    - 401 에러 발생 시 API Route를 통해 토큰 재발급
        
    - 기존 실패 요청을 자동으로 재시도하도록 구성
        
- 로그인 이후 유저 정보는 **Zustand persist**를 사용해 상태 유지 구현
    

### R (Result)

- 인증 로직의 핵심 책임을 서버로 이동시켜 보안성 강화
    
- 토큰 탈취 및 XSS 리스크 감소
    
- 클라이언트는 인증 상태 소비에만 집중하는 구조로 단순화
    
- 서버·클라이언트 경계를 명확히 한 Next.js 친화적인 인증 아키텍처 완성
    

---

## 2. Header 공통 컴포넌트 및 상태 하이드레이션 문제 해결

### S (Situation)

Zustand persist 사용 시 페이지 새로고침 또는 이동 과정에서  
로컬스토리지에서 상태를 복원하기 전까지 로그인 상태가 `undefined`로 노출되어  
헤더 UI가 순간적으로 깜빡이는 플리커링 현상이 발생했다.

### T (Task)

- 헤더 컴포넌트에서 플리커링 제거
    
- 로그인 상태에 따른 안정적인 조건부 렌더링 구현
    

### A (Action)

- Zustand persist 미들웨어의 `onRehydrateStorage` 옵션을 활용
    
- 상태 복원 완료 여부를 나타내는 `isHydrated` 플래그를 store에서 관리
    
- 헤더 컴포넌트에서
    
    - `isHydrated === true`일 때만 로그인 여부 UI 렌더링하도록 제어
        

### R (Result)

- 페이지 이동 및 새로고침 시 UI 깜빡임 제거
    
- 사용자 경험 개선
    
- 전역 상태 하이드레이션 타이밍에 대한 이해도 향상
    

---

## 3. 라우트 보호 (Route Guard) 구현

### S (Situation)

로그인 여부와 무관하게 URL 직접 접근이 가능하여  
비로그인 유저가 인증이 필요한 페이지에 접근하거나,  
로그인 유저가 로그인/회원가입 페이지로 이동할 수 있는 문제가 존재했다.

### T (Task)

- 인증 상태 기반 라우트 접근 제어
    
- 클라이언트 로직이 아닌 서버 레벨에서 선제적 차단 구현
    

### A (Action)

- `middleware.ts`를 활용해 라우트 보호 로직 구현
    
- `next/headers`를 통해 쿠키 기반 로그인 여부 판단
    
- 조건 분기:
    
    - 로그인 상태 → `/login`, `/signup` 접근 시 메인 페이지로 리다이렉트
        
    - 비로그인 상태 → 인증 필요 페이지 접근 시 로그인 페이지로 리다이렉트
        

### R (Result)

- 인증이 필요한 페이지에 대한 접근 통제 완성
    
- 불필요한 클라이언트 렌더링 및 리다이렉트 제거
    
- 보안성과 UX를 동시에 개선
    

---

## 4. 배포 자동화 및 협업 환경 개선

### S (Situation)

팀 프로젝트 특성상 코드 리뷰 시 변경 내용을 코드만으로 파악하기 어려웠고,  
UI 변경사항은 직접 실행해보지 않으면 확인이 힘들었다.

### T (Task)

- 리뷰 과정에서 시각적 확인이 가능한 환경 구축
    
- 배포 자동화로 협업 효율 개선
    

### A (Action)

- GitHub Actions와 Vercel을 연동
    
- PR 생성 시마다 해당 브랜치 기준의 **Vercel Preview 배포 링크** 자동 생성
    
- 리뷰어가 코드와 실제 동작 UI를 동시에 확인 가능하도록 구성
    

### R (Result)

- 코드 리뷰 품질 향상
    
- UI/UX 관련 피드백 속도 증가
    
- 팀 협업 생산성 개선
    

---

## 5. PWA 적용

### S (Situation)

모바일 환경에서도 웹 접근성을 높일 필요가 있었다.

### T (Task)

- 웹 앱을 앱처럼 사용할 수 있는 환경 제공
    

### A (Action)

- 프로젝트에 PWA 설정 적용
    
- 홈 화면 설치 및 오프라인 접근 가능하도록 구성
    

### R (Result)

- 모바일 사용성 개선
    
- 서비스 접근성 확대
    

---

## 프로젝트를 통해 얻은 결과

- Next.js 첫 프로젝트로서  
    Server Component / Client Component / Server Action 역할 분리에 대한 실전 이해도 확보
    
- 인증·토큰 관리 구조 개선 경험을 통해  
    **보안 관점의 프론트엔드 아키텍처 설계 역량 강화**
    
- SOP, CORS 등 웹 보안 정책에 대한 실제 적용 경험 축적
    
- 공통 컴포넌트, API 인스턴스 관리, 인증 흐름 설계 전반에 대한 구조적 사고 능력 향상